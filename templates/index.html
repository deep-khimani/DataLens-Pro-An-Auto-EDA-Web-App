<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataLens Pro - Advanced Analytics Platform</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <nav class="navbar">
            <div class="nav-brand">
                <i class="fas fa-chart-line"></i>
                <span>DataLens Pro</span>
            </div>
            <div class="nav-controls">
                <div class="theme-switcher">
                    <input type="checkbox" id="theme-toggle" class="theme-toggle-checkbox">
                    <label for="theme-toggle" class="theme-toggle-label">
                        <i class="fas fa-sun sun-icon"></i>
                        <i class="fas fa-moon moon-icon"></i>
                    </label>
                </div>
            </div>
        </nav>

        <div class="main-content">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h2><i class="fas fa-cogs"></i> Controls</h2>
                </div>

                <div class="control-section">
                    <h3><i class="fas fa-upload"></i> Data Upload</h3>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-content">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Drag & drop your CSV or Excel file here</p>
                            <p class="upload-subtext">or click to browse</p>
                            <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" hidden>
                        </div>
                    </div>
                    <div class="file-info" id="fileInfo" style="display: none;">
                        <div class="info-item">
                            <i class="fas fa-file"></i>
                            <span id="fileName">No file selected</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-table"></i>
                            <span id="fileShape">0 rows √ó 0 columns</span>
                        </div>
                        <div class="data-types" id="dataTypes">
                            <div class="data-type-info">
                                <i class="fas fa-hashtag"></i>
                                <span id="numericCount">0 numeric</span>
                            </div>
                            <div class="data-type-info">
                                <i class="fas fa-tags"></i>
                                <span id="categoricalCount">0 categorical</span>
                            </div>
                            <div class="data-type-info">
                                <i class="fas fa-calendar"></i>
                                <span id="datetimeCount">0 datetime</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section" id="previewSection" style="display: none;">
                    <h3><i class="fas fa-eye"></i> Data Preview</h3>
                    <div class="form-group">
                        <label for="tableOption">Preview Options</label>
                        <select id="tableOption" class="form-control">
                            <option value="head">First 10 rows</option>
                            <option value="tail">Last 10 rows</option>
                            <option value="sample">Random sample</option>
                            <option value="full">All data (max 100)</option>
                        </select>
                    </div>
                    <button id="previewBtn" class="btn btn-secondary">
                        <i class="fas fa-refresh"></i> Update Preview
                    </button>
                </div>

                <div class="control-section" id="visualizationSection" style="display: none;">
                    <h3><i class="fas fa-chart-bar"></i> Visualization</h3>
                    
                    <div class="form-group">
                        <label for="chartType">Chart Type</label>
                        <select id="chartType" class="form-control">
                            <option value="">Select chart type</option>
                            <optgroup label="üìä Distribution & Comparison">
                                <option value="bar">üìä Bar Chart</option>
                                <option value="histogram">üìä Histogram</option>
                                <option value="box">üì¶ Box Plot</option>
                                <option value="stacked_bar">üìä Stacked Bar Chart</option>
                            </optgroup>
                            <optgroup label="üìà Trends & Relationships">
                                <option value="line">üìà Line Chart</option>
                                <option value="area">üìà Area Chart</option>
                                <option value="scatter">üîç Scatter Plot</option>
                                <option value="bubble">ü´ß Bubble Chart</option>
                            </optgroup>
                            <optgroup label="ü•ß Proportions & Patterns">
                                <option value="pie">ü•ß Pie Chart</option>
                                <option value="doughnut">üç© Doughnut Chart</option>
                                <option value="heatmap">üî• Heatmap</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="chart-requirements" id="chartRequirements" style="display: none;">
                        <div class="requirement-info">
                            <i class="fas fa-info-circle"></i>
                            <div class="requirement-details">
                                <strong id="requirementTitle">Chart Requirements</strong>
                                <p id="requirementDescription">Select a chart type to see requirements</p>
                                <small id="requirementExample">Example: -</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="xColumnGroup">
                        <label for="xColumn" id="xColumnLabel">X-Axis Column</label>
                        <select id="xColumn" class="form-control" disabled>
                            <option value="">First select chart type</option>
                        </select>
                        <small class="form-hint" id="xColumnHint">Select a chart type to see compatible columns</small>
                    </div>

                    <div class="form-group" id="yColumnGroup">
                        <label for="yColumn" id="yColumnLabel">Y-Axis Column</label>
                        <select id="yColumn" class="form-control" disabled>
                            <option value="">First select chart type</option>
                        </select>
                        <small class="form-hint" id="yColumnHint">Select a chart type to see compatible columns</small>
                    </div>

                    <div class="form-group" id="categoryColumnGroup" style="display: none;">
                        <label for="categoryColumn">Category Column</label>
                        <select id="categoryColumn" class="form-control" disabled>
                            <option value="">Select category</option>
                        </select>
                        <small class="form-hint">For pie/doughnut charts</small>
                    </div>

                    <div class="form-group" id="valueColumnGroup" style="display: none;">
                        <label for="valueColumn">Value Column</label>
                        <select id="valueColumn" class="form-control" disabled>
                            <option value="">Select values</option>
                        </select>
                        <small class="form-hint">Numeric values for the categories</small>
                    </div>

                    <div class="form-group" id="sizeColumnGroup" style="display: none;">
                        <label for="sizeColumn">Size Column</label>
                        <select id="sizeColumn" class="form-control" disabled>
                            <option value="">Select size column</option>
                        </select>
                        <small class="form-hint">Third numerical column for bubble size</small>
                    </div>

                    <div class="form-group" id="stackColumnGroup" style="display: none;">
                        <label for="stackColumn">Stack Column</label>
                        <select id="stackColumn" class="form-control" disabled>
                            <option value="">Select stack category</option>
                        </select>
                        <small class="form-hint">Second categorical column for stacking</small>
                    </div>

                    <div class="ai-recommendations" id="aiRecommendations">
                        <h4><i class="fas fa-robot"></i> AI Recommendations</h4>
                        <div id="aiRecommendationsList">
                            Select chart type and columns to get AI-powered recommendations
                        </div>
                    </div>

                    <button id="visualizeBtn" class="btn btn-primary" disabled>
                        <i class="fas fa-magic"></i> Create Visualization
                    </button>
                </div>
            </aside>

            <main class="content">
                <div class="content-header">
                    <h1>Advanced Data Analytics Dashboard</h1>
                    <p>Upload your data and explore 10 essential visualization types with smart column matching</p>
                </div>

                <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                    <div class="loading-content">
                        <div class="loading-spinner"></div>
                        <p>Processing your data...</p>
                    </div>
                </div>

                <div class="error-message" id="errorMessage" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span id="errorText">Error message will appear here</span>
                </div>

                <div class="content-grid" id="contentGrid">
                    <div class="welcome-card card">
                        <div class="card-header">
                            <h3><i class="fas fa-info-circle"></i> Welcome to DataLens Pro</h3>
                        </div>
                        <div class="card-body">
                            <p>Get started by uploading a CSV or Excel file using the upload area on the left.</p>
                            <ul>
                                <li>‚úÖ Support for CSV and Excel files</li>
                                <li>üîç Automatic data preview and statistics</li>
                                <li>ü§ñ AI-powered chart recommendations</li>
                                <li>üìä 10 essential chart types</li>
                                <li>üéØ Perfect column compatibility matching</li>
                                <li>üåô Beautiful dark theme by default</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card" id="previewCard" style="display: none;">
                        <div class="card-header">
                            <h3><i class="fas fa-table"></i> Data Preview</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-wrapper" id="previewTable"></div>
                        </div>
                    </div>

                    <div class="card" id="statsCard" style="display: none;">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-pie"></i> Statistical Summary</h3>
                        </div>
                        <div class="card-body">
                            <div class="table-wrapper" id="statsTable"></div>
                        </div>
                    </div>

                    <div class="card chart-card" id="chartCard" style="display: none;">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> Interactive Visualization</h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="myChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
